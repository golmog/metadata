{% extends "base.html" %}
{% block content %}

{{ macros.m_button_group([['globalSettingSaveBtn', '설정 저장'], ['globalOpenBtn', '사이트', [('url','https://avdbs.com')] ]])}}
{{ macros.m_row_start('5') }}
{{ macros.m_row_end() }}

{{ macros.m_hr_black() }}
<form id='setting' name='setting'>
<div class="tab-content mb-4" id="nav-tabContent">
  {{ macros.setting_input_text_and_buttons('jav_censored_avdbs_test_name', '테스트', [['jav_censored_avdbs_test_btn', '테스트']], value=arg['jav_censored_avdbs_test_name'], desc=['浅野こころ']) }}
  {{ macros.m_hr() }}
  {{ macros.setting_checkbox('jav_censored_avdbs_use_local_db', '로컬 DB 사용', value=arg['jav_censored_avdbs_use_local_db'], desc=['Avdbs 데이터를 로컬 SQLite DB에서 먼저 조회합니다.'] )}}
  <div id="jav_censored_avdbs_use_local_db_div" class="collapse">
  {{ macros.setting_input_text('jav_censored_avdbs_local_db_path', '로컬 DB 경로', value=arg['jav_censored_avdbs_local_db_path']) }}
  </div>
  {{ macros.m_hr() }}
  {{ macros.setting_checkbox('jav_censored_avdbs_use_web_search', '사이트 검색 사용 (Fallback)', value=arg['jav_censored_avdbs_use_web_search'], desc=['로컬 DB에서 배우를 찾지 못했을 경우, Avdbs.com 사이트에 직접 접속하여 검색합니다.'] )}}
  <div id="jav_censored_avdbs_use_web_search_div" class="collapse">
    {{ macros.setting_checkbox('jav_censored_avdbs_use_proxy', 'Proxy 사용', value=arg['jav_censored_avdbs_use_proxy']) }}
    <div id="jav_censored_avdbs_use_proxy_div" class="collapse">
      {{ macros.setting_input_text('jav_censored_avdbs_proxy_url', 'Proxy URL', value=arg['jav_censored_avdbs_proxy_url']) }}
    </div>
  </div>
</div>
</form>


<script type="text/javascript">
$(document).ready(function(){
  use_collapse("jav_censored_avdbs_use_local_db");
  use_collapse("jav_censored_avdbs_use_web_search");
  use_collapse("jav_censored_avdbs_use_proxy");
});

$('#jav_censored_avdbs_use_local_db').change(function() {use_collapse('jav_censored_avdbs_use_local_db');});
$('#jav_censored_avdbs_use_web_search').change(function() {use_collapse('jav_censored_avdbs_use_web_search');});
$('#jav_censored_avdbs_use_proxy').change(function() {use_collapse('jav_censored_avdbs_use_proxy');});

$("body").on('click', '#jav_censored_avdbs_test_btn', function(e){
  e.preventDefault();
  globalSendCommand('actor_test', 'avdbs', $('#jav_censored_avdbs_test_name').val());
});


</script>
{% endblock %}
